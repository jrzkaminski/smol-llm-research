# api-bench

В репозитории бенчмарка на github нет готового датасета с промптами, его необходимо сгенерировать, используя сторонние репозитории.

Первый вариант генерации - на основе грамматики. При попытке генерации выяснилось, что файлы с данными(с других репозиториев) отличаются по формату, который ожидает генератор датасета, поэтому таким образом получить датасет не удалось.

Второй вариант генерации - используя LLM для получения исходного промпта исходя из вызванных функций и их аргументов. 
На выбор есть 2 датасета, представляющие из себя диалоги пользователь-агент в формате json, SGD и MultiWOZ

В SGD 1 промпту соответствует 1 вызов функции, в MultiWOZ - 1 и более вызов функции.
За 200 запросов к LLM удалось сгенерировать небольшой датасет:

[multiWOZ-processed-dev](multiWOZ-processed-dev.jsonl)

Статистика по сгенерированным запросам:

| Количество вызываемых <br/>функций в запросе | количество таких <br/>запросов |
|:---------------------------------------:|:-------------------------:|
|                    1                    |            32             |
|                    3                    |             6             |
|                    2                    |             4             |
|                    4                    |             2             |

Так как получилось очень мало сложных кейсов, принято решение, что такая генерация не рациональна.

Файлы:

1) [сгенерированный датасет](multiWOZ-processed-dev.jsonl) <br>
2) [код генерации](api_bench_generation.ipynb) <br>
3) [пример диалога, на основе которого генерировался датасет](dialogues_001.json)